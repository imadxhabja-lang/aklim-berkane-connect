<section class="container mx-auto mt-6 px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        
        <div class="bg-white border-r-4 border-green-500 p-4 rounded-xl shadow-sm flex justify-between items-center">
            <div>
                <span class="text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded font-bold uppercase">أكليم</span>
                <h2 id="pharmaNameAklim" class="font-bold text-gray-800 mt-1">جاري التحميل...</h2>
            </div>
            <div id="pharmaTimeAklim" class="text-green-600 font-bold text-sm">--:--</div>
        </div>

        <div class="bg-white border-r-4 border-blue-500 p-4 rounded-xl shadow-sm flex justify-between items-center">
            <div>
                <span class="text-[10px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded font-bold uppercase">بركان</span>
                <h2 id="pharmaNameBerkane" class="font-bold text-gray-800 mt-1">جاري التحميل...</h2>
            </div>
            <div id="pharmaTimeBerkane" class="text-blue-600 font-bold text-sm">--:--</div>
        </div>

    </div>
</section>

<script type="module">
    // ... (نفس إعدادات Firebase السابقة)

    // الأكواد السرية (يمكنك تغييرها من هنا)
    const CODES = {
        "aklim": "1234",   // كود صيادلة أكليم
        "berkane": "5678"  // كود صيادلة بركان
    };

    // دالة التحديث المحدثة لتشمل المدينتين
    window.handlePharmacyUpdate = async () => {
        const city = document.getElementById('selectedCity').value; // أكليم أو بركان
        const code = document.getElementById('adminCode').value;
        const name = document.getElementById('newPharmaName').value;
        const time = document.getElementById('newPharmaTime').value;

        if (code !== CODES[city]) {
            alert("الكود السري غير صحيح لهذه المدينة!");
            return;
        }

        try {
            await setDoc(doc(db, "config", `pharmacy_${city}`), { name, time });
            alert(`تم تحديث صيدلية ${city} بنجاح!`);
            location.reload();
        } catch (e) { alert("خطأ في الاتصال"); }
    };

    // دالة جلب البيانات لتشمل المدينتين
    async function loadPharmacies() {
        const cities = ['aklim', 'berkane'];
        for (const city of cities) {
            const snap = await getDoc(doc(db, "config", `pharmacy_${city}`));
            if (snap.exists()) {
                const elementId = city === 'aklim' ? 'PharmaNameAklim' : 'PharmaNameBerkane';
                const timeId = city === 'aklim' ? 'PharmaTimeAklim' : 'PharmaTimeBerkane';
                document.getElementById(`pharmaName${city.charAt(0).toUpperCase() + city.slice(1)}`).innerText = snap.data().name;
                document.getElementById(`pharmaTime${city.charAt(0).toUpperCase() + city.slice(1)}`).innerText = snap.data().time;
            }
        }
    }
    loadPharmacies();
</script>
