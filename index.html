<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Berkane Connect - دليل الخدمات المحلية</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f7f7f7; }
    header { background: #d32f2f; color: white; padding: 15px; text-align: center; }
    .section { padding: 20px; }
    .card { background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
    .card h3 { margin: 0; }
    .btn { background: #d32f2f; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none;}
  </style>
</head>
<body>
  <header>
    <h1>Berkane Connect</h1>
    <p>دليل المهن والخدمات المحلية في بركان وأكليم</p>
  </header>

  <div class="section" id="ads-section"></div>

  <div class="section">
    <h2>المهن والخدمات</h2>
    <div id="professions-list"></div>
  </div>

  <div class="section">
    <h2>وكالات كراء السيارات</h2>
    <div id="rentals-list"></div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    // إعداد Firebase
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // عرض الإعلانات
    db.collection("ads").where("active", "==", true).get().then(snapshot => {
      const adsSection = document.getElementById("ads-section");
      snapshot.forEach(doc => {
        const ad = doc.data();
        const div = document.createElement("div");
        div.innerHTML = `<a href="${ad.link}" target="_blank">
                           <img src="${ad.image_url}" style="width:100%; border-radius:8px; margin-bottom:10px;">
                         </a>`;
        adsSection.appendChild(div);
      });
    });

    // عرض المهن
    db.collection("professions").where("approved", "==", true).get().then(snapshot => {
      const list = document.getElementById("professions-list");
      snapshot.forEach(doc => {
        const p = doc.data();
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<h3>${p.name} - ${p.profession}</h3>
                          <p>الحي: ${p.district} | المدينة: ${p.city}</p>
                          <p>ساعات العمل: ${p.working_hours}</p>
                          <a class="btn" href="tel:${p.phone}">اتصل الآن</a>`;
        list.appendChild(card);
      });
    });

    // عرض وكالات كراء السيارات
    db.collection("car_rentals").where("approved", "==", true).get().then(snapshot => {
      const list = document.getElementById("rentals-list");
      snapshot.forEach(doc => {
        const c = doc.data();
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<h3>${c.agency_name}</h3>
                          <p>المدينة: ${c.city}</p>
                          <p>السيارات: ${c.car_types.join(", ")}</p>
                          <p>السعر لليوم: ${c.price_per_day}</p>
                          <a class="btn" href="tel:${c.phone}">اتصل الآن</a>`;
        list.appendChild(card);
      });
    });
  </script>
</body>
</html>
